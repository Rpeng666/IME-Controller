# 更新日志

## v0.2.0 - 定时强制检测功能

### 新增功能
- **定时强制检测输入法状态**：程序现在每500毫秒检测一次当前输入法状态，如果发现输入法被用户或系统切换，立即强制恢复为配置的状态
- **双重保护机制**：同时保留了窗口切换事件钩子和定时检测，确保输入法状态始终符合配置

### 技术实现
- 使用Windows定时器(`SetTimer`)每500ms触发一次检测
- 在窗口消息处理中添加了`WM_TIMER`消息处理
- 检测逻辑复用了现有的`event_hook_callback`函数，确保行为一致
- 程序退出时正确清理定时器资源

### 使用效果
- **"每时每刻"强制检测**：无论用户如何手动切换输入法，程序都会在500ms内强制恢复为配置的状态
- **兼容性保持**：所有原有功能保持不变，包括热键、托盘菜单、开机自启动等
- **排除应用支持**：定时检测同样尊重排除应用列表设置

### 配置说明
- 检测间隔：500毫秒（硬编码）
- 可通过托盘菜单的"启用软件功能"开关控制定时检测的开启/关闭
- 当总开关关闭时，定时检测自动停止工作

### 注意事项
- 该功能对系统资源消耗极小，每500ms的检测不会影响系统性能
- 与现有的窗口切换事件钩子机制并行工作，提供双重保障
- 在排除列表中的应用不会受到强制检测的影响
